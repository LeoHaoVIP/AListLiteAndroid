System.register(["./index-legacy-C7GeLJzS.js"],function(e,r){"use strict";var t,n,a,s,u,c,i,o,g,d,l,h,f,y,b,p,v,x,w,_,k;return{setters:[e=>{t=e.k,n=e.bb,a=e.bs,s=e.C,u=e.E,c=e.S,i=e.aj,o=e.c2,g=e.q,d=e.aM,l=e.ad,h=e.ai,f=e.aG,y=e.I,b=e.L,p=e.aq,v=e.a8,x=e.x,w=e.bv,_=e.bd,k=e.de}],execute:function(){e("default",()=>{const{back:e}=t(),[r,m]=n(()=>a.post("/auth/2fa/generate")),q=g(),[$,I]=s(),[S,j]=s("");(async()=>{if(v().otp)return x.warning(q("users.2fa_already_enabled")),void e();const r=await m();w(r,I)})();const[C,E]=n(()=>a.post("/auth/2fa/verify",{code:S(),secret:$()?.secret})),z=async()=>{const r=await E();_(r,()=>{k({...v(),otp:!0}),e()})};return u(p,{get loading(){return r()},get children(){return u(c,{get when(){return $()},get children(){return u(i,{spacing:"$2",alignItems:"start",get children(){return[u(o,{get children(){return q("users.scan_qr")}}),u(d,{boxSize:"$xs",rounded:"$lg",get src(){return $()?.qr}}),u(o,{get children(){return[l(()=>q("users.or_manual")),":"," ",u(h,{get color(){return f()},get children(){return $()?.secret}})]}}),u(y,{maxW:"$xs",get placeholder(){return q("users.input_code")},get value(){return S()},onInput:e=>j(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&z()}}),u(b,{get loading(){return C()},onClick:z,get children(){return q("users.verify")}})]}})}})}})})}}});

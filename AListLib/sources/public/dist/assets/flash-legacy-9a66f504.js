System.register(["./index-legacy-1f04bc87.js"],(function(e,t){"use strict";var r,n,o,s,l,d,i,a,c,f,y,u;return{setters:[e=>{r=e.b,n=e.d,o=e.q,s=e.a5,l=e.am,d=e.x,i=e.aT,a=e.y,c=e.a2,f=e.S,y=e.a6,u=e.as}],execute:function(){var t=u("<div id=swf-container>");e("default",(()=>{const e=r(),{replace:u}=n(),[m,w]=o(!0),[h,p]=o(!1);let g=s.objs.filter((e=>e.name.toLowerCase().endsWith(".swf")));0===g.length&&(g=[s.obj]);const v=e=>{const t=g.findIndex((e=>e.name===s.obj.name));"ArrowLeft"===e.key&&t>0?u(g[t-1].name):"ArrowRight"===e.key&&t<g.length-1&&u(g[t+1].name)};l((()=>{window.addEventListener("keydown",v),E()})),d((()=>{window.removeEventListener("keydown",v);const e=document.getElementById("ruffle-player");e?.remove();const t=document.getElementById("ruffle-script");t?.remove()}));const E=()=>{w(!0),p(!1);const e=document.getElementById("ruffle-player");if(e?.remove(),window.RufflePlayer)return void P();const t=document.createElement("script");t.src="/static/ruffle/ruffle.js",t.async=!0,t.id="ruffle-script",t.onload=()=>{P()},t.onerror=()=>{p(!0),w(!1),console.error("无法加载Ruffle播放器")},document.head.appendChild(t)},P=()=>{try{const e=window.RufflePlayer.newest().createPlayer();e.id="ruffle-player",e.style.width="100%",e.style.height="100%";const t=document.getElementById("swf-container");t&&(t.innerHTML="",t.appendChild(e),e.addEventListener("loaded",(()=>{w(!1)})),e.addEventListener("error",(()=>{p(!0),w(!1)})),e.load(s.raw_url))}catch(e){console.error("Ruffle初始化失败:",e),p(!0),w(!1)}};return(L=t()).style.setProperty("position","relative"),L.style.setProperty("width","100%"),L.style.setProperty("height","75vh"),L.style.setProperty("display","flex"),L.style.setProperty("justify-content","center"),L.style.setProperty("align-items","center"),i(L,a(f,{get when(){return m()},get children(){return a(c,{})}}),null),i(L,a(f,{get when(){return h()},get children(){return a(y,{get msg(){return e("preview.failed_load_swf")},h:"75vh"})}}),null),L;var L}))}}}));

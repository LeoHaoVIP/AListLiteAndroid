System.register(["./index-legacy-C7GeLJzS.js","./index-legacy-Bfi-fZ_7.js","./Common-legacy-CZUhu1t1.js","./useTitle-legacy-HTPH2TsG.js","./index-legacy-BfhvY8g1.js","./index-legacy-Cyob4gap.js","./SettingItem-legacy-DdBPcWkM.js","./item_type-legacy-BFH7Oxl9.js","./ResponsiveGrid-legacy-uN8v6zqF.js"],function(e,t){"use strict";var n,r,i,a,s,o,l,d,c,u,g,h,m,f,p,x,y,k,v,b,w,_,C,$,j,S,I,T,N,z,G,M,E,B,F,L;return{setters:[e=>{n=e.az,r=e.dE,i=e.C,a=e.bb,s=e.bs,o=e.dF,l=e.dG,d=e.a_,c=e.E,u=e.q,g=e.c2,h=e.ay,m=e.aO,f=e.aj,p=e.ai,x=e.ad,y=e.cE,k=e.cR,v=e.S,b=e.a4,w=e.L,_=e.M,C=e.F,$=e.bw,j=e.G,S=e.H,I=e.T,T=e.I,N=e.K,z=e.N,G=e.bv,M=e.bd,E=e.bG,B=e.bT},e=>{F=e.G},e=>{L=e.default},null,null,null,null,null,null],execute:function(){var t=n('<svg width=1em height=1em viewBox="0 0 24 24"><g fill=none stroke=currentColor stroke-linecap=round stroke-width=2><path stroke-dasharray=60 stroke-dashoffset=60 stroke-opacity=.3 d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill=freeze attributeName=stroke-dashoffset dur=1.3s values=60;0></animate></path><path stroke-dasharray=15 stroke-dashoffset=15 d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill=freeze attributeName=stroke-dashoffset dur=0.3s values=15;0></animate><animateTransform attributeName=transform dur=1.5s repeatCount=indefinite type=rotate values="0 12 12;360 12 12">'),O=n('<svg width=1em height=1em viewBox="0 0 24 24"><g stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><path fill=currentColor fill-opacity=0 stroke-dasharray=60 stroke-dashoffset=60 d="M3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12Z"><animate fill=freeze attributeName=stroke-dashoffset dur=0.5s values=60;0></animate><animate fill=freeze attributeName=fill-opacity begin=0.8s dur=0.15s values=0;0.3></animate></path><path fill=none stroke-dasharray=14 stroke-dashoffset=14 d="M8 12L11 15L16 10"><animate fill=freeze attributeName=stroke-dashoffset begin=0.6s dur=0.2s values=14;0>');function D(e){return n=t(),r(n,e,!0,!0),n;var n}function R(e){return t=O(),r(t,e,!0,!0),t;var t}const Z=()=>{const e=u(),[t,n]=i(),[r,E]=a(()=>s.get("/admin/index/progress")),[B,O]=i(),Z=e=>{B()&&clearTimeout(B()),O(e?window.setTimeout(q,5e3):void 0)},q=async()=>{const e=await E();G(e,e=>{n(e),Z(!e.is_done)},(e,t)=>{Z(404!==t)})};q();const[H,K]=a(o),X=async()=>{const e=await K();M(e),q()},[A,J]=a(()=>s.post("/admin/index/clear")),P=async()=>{const e=await J();M(e),q()},[Q,U]=a(()=>s.post("/admin/index/stop")),V=async()=>{const e=await U();M(e),q()};let W,Y;const[ee,te]=a(l),ne=async()=>{let e=[];W.value&&(e=W.value.split("\n"));let t=20;Y.value&&(t=parseInt(Y.value));const n=await te(e,t);M(n),q()},{isOpen:re,onOpen:ie,onClose:ae}=d();return[c(g,{get children(){return e("indexes.index_header")}}),c(L,{get group(){return F.INDEX}}),c(g,{get children(){return e("indexes.current")}}),c(v,{get when(){return t()},get children(){return c(h,{spacing:"$2",w:"fit-content",shadow:"$md",rounded:"$lg",get bg(){return b("","$neutral3")()},get children(){return[c(m,{boxSize:"$28",color:"$accent9",p:"$2",get as(){return t()?.is_done?R:D}}),c(f,{spacing:"$2",flex:"1",alignItems:"start",mr:"$2",get children(){return[c(p,{get children(){return[x(()=>e("indexes.obj_count")),":",c(y,{colorScheme:"info",ml:"$2",get children(){return t()?.obj_count}})]}}),c(p,{get children(){return[x(()=>e("indexes.last_done_time")),":",c(y,{colorScheme:"accent",ml:"$2",get children(){return x(()=>!!t().last_done_time)()?k(t().last_done_time):e("indexes.unknown")}})]}}),c(v,{get when(){return t()?.error},get children(){return c(p,{css:{wordBreak:"break-all"},get children(){return[x(()=>e("indexes.error")),":",c(y,{colorScheme:"danger",ml:"$2",get children(){return t().error}})]}})}})]}})]}})}}),c(h,{spacing:"$2",get children(){return[c(w,{colorScheme:"accent",onClick:[q,void 0],get loading(){return r()},get children(){return e("global.refresh")}}),c(w,{colorScheme:"danger",onClick:[P,void 0],get loading(){return A()},get children(){return e("indexes.clear")}}),c(w,{colorScheme:"warning",onClick:[V,void 0],get loading(){return Q()},get children(){return e("indexes.stop")}}),c(w,{onClick:[X,void 0],get loading(){return H()},get children(){return e("indexes."+(t()?.is_done?"rebuild":"build"))}})]}}),c(w,{onClick:ie,get children(){return e("indexes.update")}}),c(z,{get opened(){return re()},onClose:ae,get children(){return[c(_,{}),c(C,{get children(){return[c($,{}),c(j,{get children(){return e("indexes.update")}}),c(S,{get children(){return[c(g,{get children(){return e("indexes.paths_to_update")}}),c(I,{ref(e){"function"==typeof W?W(e):W=e}}),c(g,{get children(){return e("indexes.max_depth")}}),c(T,{value:20,type:"number",ref(e){"function"==typeof Y?Y(e):Y=e}})]}}),c(N,{get children(){return c(w,{onClick:[ne,void 0],get loading(){return ee()},get children(){return e("indexes.update")}})}})]}})]}})]},q=()=>{const e=u(),[t,n]=i(),[r,o]=a(()=>s.get("/admin/scan/progress")),[l,d]=i(),h=e=>{l()&&clearTimeout(l()),d(e?window.setTimeout(m,5e3):void 0)},m=async()=>{const e=await o();G(e,e=>{n(e),h(!e.is_done)},()=>{h(!0)})};m();const[k,_]=a(()=>s.post("/admin/scan/stop")),C=async()=>{const e=await _();M(e),m()},[$,j]=i("/"),[S,I]=i(0),[N,z]=a(()=>s.post("/admin/scan/start",{path:$(),limit:S()}));return[c(g,{get children(){return e("indexes.scan_header")}}),c(v,{get when(){return t()},get children(){return c(f,{alignItems:"start",spacing:"$2",w:"fit-content",p:"$2",shadow:"$md",rounded:"$lg",get bg(){return b("","$neutral3")()},get children(){return[c(p,{get children(){return[x(()=>e("indexes.task_status")),":",c(y,{get colorScheme(){return t()?.is_done?"accent":"success"},ml:"$2",get children(){return x(()=>!!t()?.is_done)()?e("indexes.idle"):e("indexes.running")}})]}}),c(p,{get children(){return[x(()=>e("indexes.obj_count")),":",c(y,{colorScheme:"info",ml:"$2",get children(){return t()?.obj_count}})]}}),c(w,{colorScheme:"danger",onClick:C,get loading(){return k()},get disabled(){return t()?.is_done},get children(){return e("indexes.stop")}})]}})}}),c(B,{w:"100%",display:"flex",flexDirection:"column",get children(){return[c(E,{display:"flex",alignItems:"center",get children(){return e("indexes.path_to_scan")}}),c(T,{get value(){return $()},onInput:e=>j(e.currentTarget.value)}),c(E,{display:"flex",alignItems:"center",get children(){return e("indexes.rate_limit")}}),c(T,{type:"number",get value(){return S()},step:.1,onInput:e=>I(parseFloat(e.currentTarget.value))})]}}),c(w,{colorScheme:"info",onClick:async()=>{const e=await z();M(e),m()},get loading(){return N()},get children(){return e("indexes.start")}})]};e("default",()=>c(f,{spacing:"$2",w:"$full",alignItems:"start",get children(){return[c(Z,{}),c(q,{})]}}))}}});

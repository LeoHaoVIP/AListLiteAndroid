System.register(["./index-legacy-C7GeLJzS.js"],function(e,t){"use strict";var n,r,o,l,d,a,i,s,c,f,u,w,m;return{setters:[e=>{n=e.k,r=e.C,o=e.e7,l=e.a6,d=e.aw,a=e.P,i=e.az,s=e.a$,c=e.E,f=e.ae,u=e.S,w=e.ac,m=e.q}],execute:function(){var t=i("<div id=swf-container style=position:relative;width:100%;height:75vh;display:flex;justify-content:center;align-items:center>");e("default",()=>{const e=m(),{replace:i}=n(),[y,h]=r(!0),[g,v]=r(!1),{ruffleJSPath:p}=o();let E=l.objs.filter(e=>e.name.toLowerCase().endsWith(".swf"));0===E.length&&(E=[l.obj]);const L=e=>{const t=E.findIndex(e=>e.name===l.obj.name);"ArrowLeft"===e.key&&t>0?i(E[t-1].name):"ArrowRight"===e.key&&t<E.length-1&&i(E[t+1].name)};d(()=>{window.addEventListener("keydown",L),j()}),a(()=>{window.removeEventListener("keydown",L);const e=document.getElementById("ruffle-player");e?.remove();const t=document.getElementById("ruffle-script");t?.remove()});const j=()=>{h(!0),v(!1);const e=document.getElementById("ruffle-player");if(e?.remove(),window.RufflePlayer)return void k();const t=document.createElement("script");t.src=p(),t.async=!0,t.id="ruffle-script",t.onload=()=>{k()},t.onerror=()=>{v(!0),h(!1),console.error("无法加载Ruffle播放器")},document.head.appendChild(t)},k=()=>{try{const e=window.RufflePlayer.newest().createPlayer();e.id="ruffle-player",e.style.width="100%",e.style.height="100%";const t=document.getElementById("swf-container");t&&(t.innerHTML="",t.appendChild(e),e.addEventListener("loaded",()=>{h(!1)}),e.addEventListener("error",()=>{v(!0),h(!1)}),e.load(l.raw_url))}catch(e){console.error("Ruffle初始化失败:",e),v(!0),h(!1)}};return I=t(),s(I,c(u,{get when(){return y()},get children(){return c(f,{})}}),null),s(I,c(u,{get when(){return g()},get children(){return c(w,{get msg(){return e("preview.failed_load_swf")},h:"75vh"})}}),null),I;var I})}}});

import{dP as D,U as T,dL as U,Q as E,E as A,az as q,dE as R,a$ as N,cq as B,dQ as P,S,C as k,P as j,b$ as X,dK as Y,dR as I,dS as Z,dT as ee,du as Q,bV as te}from"./index-BFcje_PK.js";var C=(e=>(e.menu="solid-contextmenu",e.submenu="solid-contextmenu solid-contextmenu__submenu",e.submenuArrow="solid-contextmenu__submenu-arrow",e.submenuOpen="solid-contextmenu__submenu--is-open",e.separator="solid-contextmenu__separator",e.item="solid-contextmenu__item",e.itemDisabled="solid-contextmenu__item--disabled",e.itemContent="solid-contextmenu__item__content",e.theme="solid-contextmenu__theme--",e.animationWillEnter="solid-contextmenu__will-enter--",e.animationWillLeave="solid-contextmenu__will-leave--",e))(C||{});function M(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}const ne=e=>{let t,i=!0;const[s,c]=k(),[y,x]=k(),$=I(()=>e.children),m=e.name||"s";e=T({name:m,enterActiveClass:m+"-enter-active",enterClass:m+"-enter",enterToClass:m+"-enter-to",exitActiveClass:m+"-exit-active",exitClass:m+"-exit",exitToClass:m+"-exit-to"},e);const{onBeforeEnter:b,onEnter:d,onAfterEnter:h,onBeforeExit:f,onExit:w,onAfterExit:r}=e;function p(n,o){if(!i||e.appear){let l=function(u){n&&(!u||u.target===n)&&(n.removeEventListener("transitionend",l),n.removeEventListener("animationend",l),n.classList.remove(...a),n.classList.remove(...v),te(()=>{s()!==n&&c(n),y()===n&&x(void 0)}),h&&h(n),e.mode==="inout"&&_(n,o))};const g=e.enterClass.split(" "),a=e.enterActiveClass.split(" "),v=e.enterToClass.split(" ");b&&b(n),n.classList.add(...g),n.classList.add(...a),M(()=>{n.classList.remove(...g),n.classList.add(...v),d&&d(n,()=>l()),(!d||d.length<2)&&(n.addEventListener("transitionend",l),n.addEventListener("animationend",l))})}o&&!e.mode?x(n):c(n)}function _(n,o){const l=e.exitClass.split(" "),g=e.exitActiveClass.split(" "),a=e.exitToClass.split(" ");if(!o.parentNode)return v();f&&f(o),o.classList.add(...l),o.classList.add(...g),M(()=>{o.classList.remove(...l),o.classList.add(...a)}),w&&w(o,()=>v()),(!w||w.length<2)&&(o.addEventListener("transitionend",v),o.addEventListener("animationend",v));function v(u){(!u||u.target===o)&&(o.removeEventListener("transitionend",v),o.removeEventListener("animationend",v),o.classList.remove(...g),o.classList.remove(...a),s()===o&&c(void 0),r&&r(o),e.mode==="outin"&&p(n,o))}}return Z(n=>{for(t=$();typeof t=="function";)t=t();return ee(()=>(t&&t!==n&&(e.mode!=="outin"?p(t,n):i&&c(t)),n&&n!==t&&e.mode!=="inout"&&_(t,n),i=!1,t))}),[s,y]};function ie(e){return{all:e=e||new Map,on:function(t,i){var s=e.get(t);s?s.push(i):e.set(t,[i])},off:function(t,i){var s=e.get(t);s&&(i?s.splice(s.indexOf(i)>>>0,1):e.set(t,[]))},emit:function(t,i){var s=e.get(t);s&&s.slice().map(function(c){c(i)}),(s=e.get("*"))&&s.slice().map(function(c){c(t,i)})}}}const L=ie(),V=Y(),G=()=>U(V);function J(e){var t,i,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=J(e[t]))&&(s&&(s+=" "),s+=i);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function z(){for(var e,t,i=0,s="";i<arguments.length;)(e=arguments[i++])&&(t=J(e))&&(s&&(s+=" "),s+=t);return s}const se=q("<div></div>",2),O=(e,t,i)=>e+t<=i?e:e<t?i-t:e-t,oe=(e,t)=>{const i={width:window.innerWidth,height:window.innerHeight};return{x:O(e.x,t.width,i.width),y:O(e.y,t.height,i.height)}},ve=e=>{const[t,i]=D(e,["id","theme","animation","onShown","onHidden"]),[s,c]=k(!1),[y,x]=k({x:0,y:0});let $;const[m,b]=k();L.on("show",r=>{var p;r.id===t.id&&(r.event.preventDefault(),b(r.props),c(!0),x((p=r.position)!=null?p:oe({x:r.event.clientX,y:r.event.clientY},{width:$.offsetWidth,height:$.offsetHeight})))});const d=()=>{L.emit("hide",t.id),c(!1)},h=T({shown:s,animation:"scale",hide:d,props:m},t);L.on("hideAll",()=>{d()}),j(()=>{L.off("show"),L.off("hideAll")});const f=E(()=>{let r="";return t.animation&&(r="solid-contextmenu-".concat(t.animation)),console.log(r),r}),w=E(()=>({enterActiveClass:f()+"-enter-active",exitActiveClass:f()+"-exit-active"}));return A(V.Provider,{value:h,get children(){return A(X,{get children(){return A(ne,T(w,{get children(){return A(S,{get when(){return s()},get children(){const r=se.cloneNode(!0),p=$;return typeof p=="function"?p(r):$=r,re(r,()=>d()),R(r,i,!1,!1),B(_=>{const n=z(C.menu,i.class,{["".concat(C.theme).concat(t.theme)]:t.theme}),o=y().x+"px",l=y().y+"px";return n!==_._v$&&P(r,_._v$=n),o!==_._v$2&&r.style.setProperty("left",_._v$2=o),l!==_._v$3&&r.style.setProperty("top",_._v$3=l),_},{_v$:void 0,_v$2:void 0,_v$3:void 0}),r}})}}))}})}})};function re(e,t){const i=s=>{var c;return!e.contains(s.target)&&((c=t())==null?void 0:c())};document.body.addEventListener("click",i),j(()=>document.body.removeEventListener("click",i))}function ae(e){return typeof e=="function"}function W(e,t){return ae(e)?e(t):e}const de=q("<div><div></div></div>",4),he=e=>{const[t,i]=D(e,["hidden","disabled","onClick","data","children"]),s=T({hidden:!1,disabled:!1},t),{props:c,hide:y}=G(),x=E(()=>({props:c(),data:e.data})),$=E(()=>W(s.disabled,x())),m=E(()=>W(s.hidden,x())),b=d=>{var h;$()||((h=e.onClick)==null||h.call(e,{event:d,...x()}),y())};return A(S,{get when(){return!m()},get children(){const d=de.cloneNode(!0),h=d.firstChild;return d.$$click=b,R(d,i,!1,!0),N(h,()=>t.children),B(f=>{const w=z(C.item,{[C.itemDisabled]:$()}),r=C.itemContent;return w!==f._v$&&P(d,f._v$=w),r!==f._v$2&&P(h,f._v$2=r),f},{_v$:void 0,_v$2:void 0}),d}})};Q(["click"]);const le=q("<div></div>",2),ce=q("<div><div><span></span></div></div>",6),me=e=>{const[t,i]=D(e,["arrow","children","disabled","hidden","label","class"]),s=T({arrow:"▶️",disabled:!1,hidden:!1},t),{props:c,id:y}=G(),x=E(()=>({props:c()})),$=E(()=>W(s.disabled,x())),m=E(()=>W(s.hidden,x()));let b,d;const[h,f]=k({x:0,y:0}),w=()=>{const n=b.getBoundingClientRect(),o=d.getBoundingClientRect(),l={width:window.innerWidth,height:window.innerHeight};let g=n.right;g+o.width>l.width&&(n.left-o.width>0?g=n.left-o.width:g=l.width-o.width);let a=n.top;a+o.height>l.height&&(n.bottom-o.height>0?a=n.bottom-o.height:a=l.height-o.height),f({x:g,y:a}),console.log(h())},[r,p]=k(!1),_=()=>{p(!0),w()};return L.on("hide",n=>{n===y&&p(!1)}),j(()=>{L.off("hide")}),A(S,{get when(){return!m()},get children(){const n=ce.cloneNode(!0),o=n.firstChild,l=o.firstChild;n.$$click=()=>r()?p(!1):_(),n.addEventListener("mouseleave",()=>p(!1)),n.addEventListener("mouseenter",()=>_()),R(n,i,!1,!0);const g=b;return typeof g=="function"?g(o):b=o,N(o,()=>s.label,l),N(l,()=>s.arrow),N(n,A(S,{get when(){return r()},get children(){const a=le.cloneNode(!0),v=d;return typeof v=="function"?v(a):d=a,N(a,()=>s.children),B(u=>{const H=C.submenu,F=h().x+"px",K=h().y+"px";return H!==u._v$&&P(a,u._v$=H),F!==u._v$2&&a.style.setProperty("left",u._v$2=F),K!==u._v$3&&a.style.setProperty("top",u._v$3=K),u},{_v$:void 0,_v$2:void 0,_v$3:void 0}),a}}),null),B(a=>{const v=z(C.item,t.class,{[C.itemDisabled]:$()}),u=C.itemContent,H=C.submenuArrow;return v!==a._v$4&&P(n,a._v$4=v),u!==a._v$5&&P(o,a._v$5=u),H!==a._v$6&&P(l,a._v$6=H),a},{_v$4:void 0,_v$5:void 0,_v$6:void 0}),n}})};Q(["click"]);const fe=e=>({show:(t,i)=>{L.emit("show",{id:(i==null?void 0:i.id)||(e==null?void 0:e.id),props:(i==null?void 0:i.props)||(e==null?void 0:e.props),event:t,position:i==null?void 0:i.position})},hideAll:()=>{L.emit("hideAll")}});export{me as C,fe as b,ve as w,he as x};

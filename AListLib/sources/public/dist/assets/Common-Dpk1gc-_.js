import{j as $,b9 as c,bq as n,cu as w,dc as C,B as I,D as t,dd as L,Q as R,bt as o,r as g,o as T,au as x,K as l,ae as B}from"./index-BeFrtC4h.js";import{b as D}from"./useTitle-QM9-qgni.js";import{I as j}from"./SettingItem-CG5PkkHH.js";import{R as q}from"./ResponsiveGrid-BoOhAULT.js";import"./index-uMglY6aV.js";import"./index-DQgSmKvW.js";import"./index-DnhdS7oh.js";import"./item_type-CV3e5W3l.js";const z=u=>{const s=T(),{pathname:S}=$();D("manage.sidemenu.".concat(S().split("/").pop()));const[d,k]=c(()=>n.get("/admin/setting/list?group=".concat(u.group))),[p,r]=w([]),i=async()=>{const e=await k();o(e,r)};i();const[y,b]=c(()=>n.post("/admin/setting/save",C(p))),[m,v]=c(()=>n.post("/admin/setting/default?group=".concat(u.group))),[f,h]=I(!1);return t(B,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[t(q,{get children(){return t(L,{each:p,children:e=>t(j,R(e,{onChange:a=>{r(_=>e().key===_.key,"value",a)},onDelete:async()=>{h(!0);const a=await n.post("/admin/setting/delete?key=".concat(e().key));h(!1),o(a,()=>{g.success(s("global.delete_success")),i()})}}))})}}),t(x,{spacing:"$2",get children(){return[t(l,{colorScheme:"accent",onClick:i,get loading(){return d()||f()||m()},get children(){return s("global.refresh")}}),t(l,{get loading(){return y()},onClick:async()=>{const e=await b();o(e,()=>g.success(s("global.save_success")))},get children(){return s("global.save")}}),t(l,{colorScheme:"warning",get loading(){return d()||f()||m()},onClick:async()=>{const e=await v();o(e,a=>{g.info(s("manage.load_default_setting_success")),r(a)})},get children(){return s("manage.load_default_setting")}})]}})]}})};export{z as default};

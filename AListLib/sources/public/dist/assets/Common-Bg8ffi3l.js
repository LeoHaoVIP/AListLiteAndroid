import{k as w,bb as g,bs as n,bX as C,dk as _,C as L,E as t,dl as R,U as I,bv as o,x as c,q as x,ay as T,L as l,dm as A,aj as j,dn as q}from"./index-BFcje_PK.js";import{b as B}from"./useTitle-D5uVo66S.js";import{I as D}from"./SettingItem-CNVSYbWM.js";import{R as E}from"./ResponsiveGrid-vV_RulBc.js";import"./index-DZCuhf81.js";import"./index-CujSWyj5.js";import"./index-CrmJXdfg.js";import"./item_type-CyD6qwPS.js";const W=d=>{const s=x(),{pathname:y}=w();B("manage.sidemenu.".concat(y().split("/").pop()));const[u,S]=g(()=>n.get("/admin/setting/list?group=".concat(d.group))),[p,i]=C([]),r=async()=>{const e=await S();o(e,i)};r();const[b,k]=g(()=>n.post("/admin/setting/save",_(p))),[m,v]=g(()=>n.post("/admin/setting/default?group=".concat(d.group))),[h,f]=L(!1);return t(j,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[t(E,{get children(){return t(R,{each:p,children:e=>t(D,I(e,{onChange:a=>{i($=>e().key===$.key,"value",a)},onDelete:async()=>{f(!0);const a=await n.post("/admin/setting/delete?key=".concat(e().key));f(!1),o(a,()=>{c.success(s("global.delete_success")),r()})}}))})}}),t(T,{spacing:"$2",get children(){return[t(l,{colorScheme:"accent",onClick:r,get loading(){return u()||h()||m()},get children(){return s("global.refresh")}}),t(l,{get loading(){return b()},onClick:async()=>{const e=await k();o(e,async()=>{c.success(s("global.save_success")),A(await n.get("/public/settings"),q)})},get children(){return s("global.save")}}),t(l,{colorScheme:"warning",get loading(){return u()||h()||m()},onClick:async()=>{const e=await v();o(e,a=>{c.info(s("manage.load_default_setting_success")),i(a)})},get children(){return s("manage.load_default_setting")}})]}})]}})};export{W as default};

System.register(["./index-legacy-C7GeLJzS.js","./FolderTree-legacy-C9HuwRat.js","./PublicKeys-legacy-Dzlf2qSQ.js","./index-legacy-BfhvY8g1.js"],function(e,r){"use strict";var n,t,a,s,l,i,d,u,c,o,g,p,h,m,w,f,b,y,x,$,_,I,v,k,C;return{setters:[e=>{n=e.k,t=e.bX,a=e.bb,s=e.bs,l=e.E,i=e.aj,d=e.c2,u=e.q,c=e.S,o=e.bT,g=e.bG,p=e.I,h=e.a7,m=e.c1,w=e.V,f=e.aY,b=e.be,y=e.L,x=e.bv,$=e.x,_=e.a8,I=e.de,v=e.aq},e=>{k=e.a},e=>{C=e.P},null],execute:function(){const r=e=>{const r=u();return l(o,{display:"inline-flex",flexDirection:"row",alignItems:"center",gap:"$2",rounded:"$md",shadow:"$md",p:"$2",w:"fit-content",get children(){return[l(g,{mb:"0",get children(){return r(`users.permissions.${e.name}`)}}),l(b,{get checked(){return e.can},onChange:()=>e.onChange(!e.can)})]}})};e("default",()=>{const e=u(),{params:q,back:S}=n(),{id:T}=q,[j,D]=t({id:0,username:"",password:"",base_path:"",role:0,permission:0,disabled:!1,sso_id:"",allow_ldap:!1}),[z,F]=a(()=>s.get(`/admin/user/get?id=${T}`));T&&(async()=>{const e=await F();x(e,D)})();const[P,E]=a(()=>s.post("/admin/user/"+(T?"update":"create"),j));return l(v,{get loading(){return z()},get children(){return l(i,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[l(d,{get children(){return e("global."+(T?"edit":"add"))}}),l(c,{get when(){return!h.is_guest(j)},get children(){return[l(o,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[l(g,{for:"username",display:"flex",alignItems:"center",get children(){return e("users.username")}}),l(p,{id:"username",get value(){return j.username},onInput:e=>D("username",e.currentTarget.value)})]}}),l(o,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[l(g,{for:"password",display:"flex",alignItems:"center",get children(){return e("users.password")}}),l(p,{id:"password",type:"password",placeholder:"********",get value(){return j.password},onInput:e=>D("password",e.currentTarget.value)})]}})]}}),l(o,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[l(g,{for:"base_path",display:"flex",alignItems:"center",get children(){return e("users.base_path")}}),l(k,{id:"base_path",get value(){return j.base_path},onChange:e=>D("base_path",e),onlyFolder:!0})]}}),l(o,{w:"$full",required:!0,get children(){return[l(g,{display:"flex",alignItems:"center",get children(){return e("users.permission")}}),l(m,{w:"$full",wrap:"wrap",gap:"$2",get children(){return l(w,{each:f,children:(e,n)=>l(r,{name:e,get can(){return h.can(j,n())},onChange:e=>{D("permission",e?j.permission|=1<<n():j.permission&=~(1<<n()))}})})}})]}}),l(o,{w:"fit-content",display:"flex",get children(){return l(b,{css:{whiteSpace:"nowrap"},id:"disabled",onChange:e=>D("disabled",e.currentTarget.checked),color:"$neutral10",fontSize:"$sm",get checked(){return j.disabled},get children(){return e("users.disabled")}})}}),l(o,{w:"fit-content",display:"flex",get children(){return l(b,{css:{whiteSpace:"nowrap"},id:"allow_ldap",onChange:e=>D("allow_ldap",e.currentTarget.checked),color:"$neutral10",fontSize:"$sm",get checked(){return j.allow_ldap},get children(){return e("users.allow_ldap")}})}}),l(y,{get loading(){return P()},onClick:async()=>{const r=await E();x(r,async()=>{$.success(e("global.save_success")),j.username===_().username&&x(await s.get("/me"),I),S()})},get children(){return e("global."+(T?"save":"add"))}}),l(c,{get when(){return T&&!h.is_guest(j)},get children(){return l(C,{isMine:!1,get userId(){return parseInt(T)}})}})]}})}})})}}});

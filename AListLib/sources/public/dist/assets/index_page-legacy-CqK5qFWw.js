System.register(["./index-legacy-D2rKgweC.js","./index-legacy-CYEFgqWT.js","./Common-legacy-Dv35vcHX.js","./useTitle-legacy-D2YgYvNp.js","./index-legacy-9_nyLeb_.js","./index-legacy-BSocJEwS.js","./SettingItem-legacy-COXP3Mlu.js","./item_type-legacy-BFH7Oxl9.js","./ResponsiveGrid-legacy-BrkKpp8X.js"],function(e,t){"use strict";var n,r,i,a,s,o,l,d,c,u,g,h,m,f,p,x,y,k,v,w,b,_,C,$,S,j,I,T,N,z,D,M,B,F,E,G;return{setters:[e=>{n=e.ay,r=e.dD,i=e.B,a=e.ba,s=e.br,o=e.dE,l=e.dF,d=e.aZ,c=e.D,u=e.o,g=e.c1,h=e.ax,m=e.aN,f=e.ai,p=e.ah,x=e.ac,y=e.cD,k=e.cQ,v=e.S,w=e.a3,b=e.K,_=e.M,C=e.E,$=e.bv,S=e.F,j=e.G,I=e.T,T=e.I,N=e.J,z=e.L,D=e.bu,M=e.bc,B=e.bF,F=e.bS},e=>{E=e.G},e=>{G=e.default},null,null,null,null,null,null],execute:function(){var t=n('<svg width=1em height=1em viewBox="0 0 24 24"><g fill=none stroke=currentColor stroke-linecap=round stroke-width=2><path stroke-dasharray=60 stroke-dashoffset=60 stroke-opacity=.3 d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill=freeze attributeName=stroke-dashoffset dur=1.3s values=60;0></animate></path><path stroke-dasharray=15 stroke-dashoffset=15 d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill=freeze attributeName=stroke-dashoffset dur=0.3s values=15;0></animate><animateTransform attributeName=transform dur=1.5s repeatCount=indefinite type=rotate values="0 12 12;360 12 12">'),L=n('<svg width=1em height=1em viewBox="0 0 24 24"><g stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><path fill=currentColor fill-opacity=0 stroke-dasharray=60 stroke-dashoffset=60 d="M3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12Z"><animate fill=freeze attributeName=stroke-dashoffset dur=0.5s values=60;0></animate><animate fill=freeze attributeName=fill-opacity begin=0.8s dur=0.15s values=0;0.3></animate></path><path fill=none stroke-dasharray=14 stroke-dashoffset=14 d="M8 12L11 15L16 10"><animate fill=freeze attributeName=stroke-dashoffset begin=0.6s dur=0.2s values=14;0>');function Z(e){return n=t(),r(n,e,!0,!0),n;var n}function O(e){return t=L(),r(t,e,!0,!0),t;var t}const H=()=>{const e=u(),[t,n]=i(),[r,B]=a(()=>s.get("/admin/index/progress")),[F,L]=i(),H=e=>{F()&&clearTimeout(F()),L(e?window.setTimeout(J,5e3):void 0)},J=async()=>{const e=await B();D(e,e=>{n(e),H(!e.is_done)},(e,t)=>{H(404!==t)})};J();const[K,Q]=a(o),R=async()=>{const e=await Q();M(e),J()},[X,q]=a(()=>s.post("/admin/index/clear")),A=async()=>{const e=await q();M(e),J()},[P,U]=a(()=>s.post("/admin/index/stop")),V=async()=>{const e=await U();M(e),J()};let W,Y;const[ee,te]=a(l),ne=async()=>{let e=[];W.value&&(e=W.value.split("\n"));let t=20;Y.value&&(t=parseInt(Y.value));const n=await te(e,t);M(n),J()},{isOpen:re,onOpen:ie,onClose:ae}=d();return[c(g,{get children(){return e("indexes.index_header")}}),c(G,{get group(){return E.INDEX}}),c(g,{get children(){return e("indexes.current")}}),c(v,{get when(){return t()},get children(){return c(h,{spacing:"$2",w:"fit-content",shadow:"$md",rounded:"$lg",get bg(){return w("","$neutral3")()},get children(){return[c(m,{boxSize:"$28",color:"$accent9",p:"$2",get as(){return t()?.is_done?O:Z}}),c(f,{spacing:"$2",flex:"1",alignItems:"start",mr:"$2",get children(){return[c(p,{get children(){return[x(()=>e("indexes.obj_count")),":",c(y,{colorScheme:"info",ml:"$2",get children(){return t()?.obj_count}})]}}),c(p,{get children(){return[x(()=>e("indexes.last_done_time")),":",c(y,{colorScheme:"accent",ml:"$2",get children(){return x(()=>!!t().last_done_time)()?k(t().last_done_time):e("indexes.unknown")}})]}}),c(v,{get when(){return t()?.error},get children(){return c(p,{css:{wordBreak:"break-all"},get children(){return[x(()=>e("indexes.error")),":",c(y,{colorScheme:"danger",ml:"$2",get children(){return t().error}})]}})}})]}})]}})}}),c(h,{spacing:"$2",get children(){return[c(b,{colorScheme:"accent",onClick:[J,void 0],get loading(){return r()},get children(){return e("global.refresh")}}),c(b,{colorScheme:"danger",onClick:[A,void 0],get loading(){return X()},get children(){return e("indexes.clear")}}),c(b,{colorScheme:"warning",onClick:[V,void 0],get loading(){return P()},get children(){return e("indexes.stop")}}),c(b,{onClick:[R,void 0],get loading(){return K()},get children(){return e("indexes."+(t()?.is_done?"rebuild":"build"))}})]}}),c(b,{onClick:ie,get children(){return e("indexes.update")}}),c(z,{get opened(){return re()},onClose:ae,get children(){return[c(_,{}),c(C,{get children(){return[c($,{}),c(S,{get children(){return e("indexes.update")}}),c(j,{get children(){return[c(g,{get children(){return e("indexes.paths_to_update")}}),c(I,{ref(e){"function"==typeof W?W(e):W=e}}),c(g,{get children(){return e("indexes.max_depth")}}),c(T,{value:20,type:"number",ref(e){"function"==typeof Y?Y(e):Y=e}})]}}),c(N,{get children(){return c(b,{onClick:[ne,void 0],get loading(){return ee()},get children(){return e("indexes.update")}})}})]}})]}})]},J=()=>{const e=u(),[t,n]=i(),[r,o]=a(()=>s.get("/admin/scan/progress")),[l,d]=i(),h=e=>{l()&&clearTimeout(l()),d(e?window.setTimeout(m,5e3):void 0)},m=async()=>{const e=await o();D(e,e=>{n(e),h(!e.is_done)},()=>{h(!0)})};m();const[k,_]=a(()=>s.post("/admin/scan/stop")),C=async()=>{const e=await _();M(e),m()},[$,S]=i("/"),[j,I]=i(0),[N,z]=a(()=>s.post("/admin/scan/start",{path:$(),limit:j()}));return[c(g,{get children(){return e("indexes.scan_header")}}),c(v,{get when(){return t()},get children(){return c(f,{alignItems:"start",spacing:"$2",w:"fit-content",p:"$2",shadow:"$md",rounded:"$lg",get bg(){return w("","$neutral3")()},get children(){return[c(p,{get children(){return[x(()=>e("indexes.task_status")),":",c(y,{get colorScheme(){return t()?.is_done?"accent":"success"},ml:"$2",get children(){return x(()=>!!t()?.is_done)()?e("indexes.idle"):e("indexes.running")}})]}}),c(p,{get children(){return[x(()=>e("indexes.obj_count")),":",c(y,{colorScheme:"info",ml:"$2",get children(){return t()?.obj_count}})]}}),c(b,{colorScheme:"danger",onClick:C,get loading(){return k()},get disabled(){return t()?.is_done},get children(){return e("indexes.stop")}})]}})}}),c(F,{w:"100%",display:"flex",flexDirection:"column",get children(){return[c(B,{display:"flex",alignItems:"center",get children(){return e("indexes.path_to_scan")}}),c(T,{get value(){return $()},onInput:e=>S(e.currentTarget.value)}),c(B,{display:"flex",alignItems:"center",get children(){return e("indexes.rate_limit")}}),c(T,{type:"number",get value(){return j()},step:.1,onInput:e=>I(parseFloat(e.currentTarget.value))})]}}),c(b,{colorScheme:"info",onClick:async()=>{const e=await z();M(e),m()},get loading(){return N()},get children(){return e("indexes.start")}})]};e("default",()=>c(f,{spacing:"$2",w:"$full",alignItems:"start",get children(){return[c(H,{}),c(J,{})]}}))}}});

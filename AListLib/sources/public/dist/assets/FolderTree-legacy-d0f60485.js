System.register(["./index-legacy-1f04bc87.js","./index-legacy-bab82b12.js"],(function(e,r){"use strict";var n,t,o,l,a,u,g,c,d,i,h,s,p,f,w,C,b,y,m,$,k,v,x,S,O,F,_,z,I,H,P,E,R,j,M,A,B,T;return{setters:[e=>{n=e.aS,t=e.b,o=e.y,l=e.I,a=e.S,u=e.D,g=e.ao,c=e.M,d=e.z,i=e.bo,h=e.A,s=e.B,p=e.C,f=e.E,w=e.q,C=e.ag,b=e.da,y=e.dw,m=e.b3,$=e.dx,k=e._,v=e.dy,x=e.r,S=e.a0,O=e.dz,F=e.av,_=e.aH,z=e.a9,I=e.P,H=e.ae,P=e.i,E=e.aa,R=e.K,j=e.j,M=e.dA,A=e.bl},e=>{B=e.x,T=e.k}],execute:function(){const r=M(),q=e("F",(e=>{const[n,t]=w("/");return e.handle?.({setPath:t}),o(C,{class:"folder-tree-box",w:"$full",overflowX:"auto",get children(){return o(r.Provider,{get value(){return{value:n,onChange:r=>{t(r),e.onChange(r)},autoOpen:e.autoOpen??!1,forceRoot:e.forceRoot??!1,showEmptyIcon:e.showEmptyIcon??!1,showHiddenFolder:e.showHiddenFolder??!0}},get children(){return o(D,{path:"/"})}})}})})),D=e=>{const{isHidePath:t}=b(),[l,u]=w(),{value:c,onChange:d,forceRoot:i,autoOpen:h,showEmptyIcon:s,showHiddenFolder:p}=y(r),[f,M]=m((()=>$(e.path,k(),i)));let q=!1;const K=async()=>{if(l()?.length)return;const e=await M();A(e,(e=>{q=!0,u(e)}),(()=>{V()&&W()}))},{isOpen:V,onToggle:W}=n(),X=()=>c()===e.path,G=v(e.path);return x(S(c,(async e=>{h&&G(e)&&(V()||W(),q||K())}))),o(a,{get when(){return p||!(t(e.path)&&!G(c()))},get children(){return o(C,{get children(){return[o(g,{spacing:"$2",get children(){return[o(a,{get when(){return!f()},get fallback(){return o(O,{size:"sm",get color(){return F()}})},get children(){return o(a,{get when(){return!Boolean(s&&void 0!==l()&&!l()?.length)},get fallback(){return o(_,{get color(){return F()},as:B})},get children(){return o(_,{get color(){return F()},as:T,get transform(){return V()?"rotate(90deg)":"none"},transition:"transform 0.2s",cursor:"pointer",onClick:()=>{W(),V()&&K()}})}})}}),o(z,{css:{whiteSpace:"nowrap"},fontSize:"$md",cursor:"pointer",px:"$1",rounded:"$md",get bgColor(){return X()?"$info8":"transparent"},get _hover(){return{bgColor:X()?"$info8":I()}},onClick:()=>{d(e.path)},get children(){return H((()=>"/"===e.path))()?"root":P(e.path)}})]}}),o(a,{get when(){return V()},get children(){return o(E,{mt:"$1",pl:"$4",alignItems:"start",spacing:"$1",get children(){return o(R,{get each(){return l()},children:r=>o(D,{get path(){return j(e.path,r.name)}})})}})}})]}})}})};e("M",(e=>{const r=t(),[n,l]=w(e.defaultValue??"/"),[g,i]=w();return x((()=>{e.opened&&g()?.setPath(n())})),o(f,{size:"xl",blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},get children(){return[o(c,{}),o(d,{get children(){return[o(h,{w:"$full",css:{overflowWrap:"break-word"},get children(){return e.header}}),o(s,{get children(){return[H((()=>e.children)),o(q,{onChange:l,handle:e=>i(e),autoOpen:!0})]}}),o(p,{display:"flex",gap:"$2",get children(){return[o(a,{get when(){return e.footerSlot},get children(){return e.footerSlot}}),o(u,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return r("global.cancel")}}),o(u,{get loading(){return e.loading},onClick:()=>e.onSubmit?.(n()),get children(){return r("global.ok")}})]}})]}})]}})})),e("a",(e=>{const{isOpen:r,onOpen:w,onClose:C}=n(),b=t();return[o(g,{w:"$full",spacing:"$2",get children(){return[o(l,{get id(){return e.id},get value(){return e.value},onInput:r=>e.onChange(r.currentTarget.value),get readOnly(){return e.onlyFolder},get onClick(){return e.onlyFolder?w:()=>{}},get placeholder(){return b("global."+(e.onlyFolder?"choose_folder":"choose_or_input_path"))}}),o(a,{get when(){return!e.onlyFolder},get children(){return o(u,{onClick:w,get children(){return b("global.choose")}})}})]}}),o(f,{size:"xl",get opened(){return r()},onClose:C,get children(){return[o(c,{}),o(d,{get children(){return[o(i,{}),o(h,{get children(){return b("global.choose_folder")}}),o(s,{get children(){return o(q,{forceRoot:!0,get onChange(){return e.onChange}})}}),o(p,{get children(){return o(u,{onClick:C,get children(){return b("global.confirm")}})}})]}})]}})]}))}}}));

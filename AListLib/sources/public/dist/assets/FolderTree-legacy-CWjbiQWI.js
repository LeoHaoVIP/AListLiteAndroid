System.register(["./index-legacy-D2rKgweC.js","./index-legacy-9_nyLeb_.js"],function(e,r){"use strict";var n,t,o,l,a,u,g,c,i,d,h,s,p,f,C,w,b,m,$,y,k,v,x,F,O,S,I,_,z,E,H,M,P,R,j,B,J,K;return{setters:[e=>{n=e.aZ,t=e.D,o=e.I,l=e.o,a=e.S,u=e.K,g=e.ax,c=e.M,i=e.E,d=e.bv,h=e.F,s=e.G,p=e.J,f=e.L,C=e.B,w=e.dJ,b=e.ao,m=e.C,$=e.ac,y=e.bV,k=e.dK,v=e.ba,x=e.dN,F=e._,O=e.dL,S=e.ak,I=e.aN,_=e.aF,z=e.dM,E=e.ah,H=e.l,M=e.a0,P=e.ai,R=e.U,j=e.z,B=e.bu},e=>{J=e.o,K=e.E}],execute:function(){const r=w(),L=e("F",e=>{const[n,o]=C("/");return e.handle?.({setPath:o}),t(b,{class:"folder-tree-box",w:"$full",overflowX:"auto",get children(){return t(r.Provider,{get value(){return{value:n,onChange:r=>{o(r),e.onChange(r)},autoOpen:e.autoOpen??!1,forceRoot:e.forceRoot??!1,showEmptyIcon:e.showEmptyIcon??!1,showHiddenFolder:e.showHiddenFolder??!0}},get children(){return t(N,{path:"/"})}})}})}),N=e=>{const{isHidePath:o}=y(),[l,u]=C(),{value:c,onChange:i,forceRoot:d,autoOpen:h,showEmptyIcon:s,showHiddenFolder:p}=k(r),[f,w]=v(()=>x(e.path,F(),d));let L=!1;const T=async()=>{if(l()?.length)return;const e=await w();B(e,e=>{L=!0,u(e)},()=>{V()&&D()})},{isOpen:V,onToggle:D}=n(),G=()=>c()===e.path,U=O(e.path);return m(S(c,async e=>{h&&U(e)&&(V()||D(),L||T())})),t(a,{get when(){return p||!(o(e.path)&&!U(c()))},get children(){return t(b,{get children(){return[t(g,{spacing:"$2",get children(){return[t(a,{get when(){return!f()},get fallback(){return t(z,{size:"sm",get color(){return _()}})},get children(){return t(a,{get when(){return!Boolean(s&&void 0!==l()&&!l()?.length)},get fallback(){return t(I,{get color(){return _()},as:K})},get children(){return t(I,{get color(){return _()},as:J,get transform(){return V()?"rotate(90deg)":"none"},transition:"transform 0.2s",cursor:"pointer",onClick:()=>{D(),V()&&T()}})}})}}),t(E,{css:{whiteSpace:"nowrap"},fontSize:"$md",cursor:"pointer",px:"$1",rounded:"$md",get bgColor(){return G()?"$info8":"transparent"},get _hover(){return{bgColor:G()?"$info8":M()}},onClick:()=>{i(e.path)},get children(){return $(()=>"/"===e.path)()?"root":H(e.path)}})]}}),t(a,{get when(){return V()},get children(){return t(P,{mt:"$1",pl:"$4",alignItems:"start",spacing:"$1",get children(){return t(R,{get each(){return l()},children:r=>t(N,{get path(){return j(e.path,r.name)}})})}})}})]}})}})};e("M",e=>{const r=l(),[n,o]=C(e.defaultValue??"/"),[d,w]=C();return m(()=>{e.opened&&d()?.setPath(n())}),t(f,{size:"xl",blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},get children(){return[t(c,{}),t(i,{get children(){return[t(h,{w:"$full",css:{overflowWrap:"break-word"},get children(){return e.header}}),t(s,{get children(){return[$(()=>e.children),t(L,{onChange:o,handle:e=>w(e),autoOpen:!0})]}}),t(p,{display:"flex",w:"$full",gap:"$4",alignItems:"flex-end",justifyContent:"flex-end",get children(){return[t(a,{get when(){return e.footerSlot},get children(){return t(b,{mr:"auto",get children(){return e.footerSlot}})}}),t(g,{spacing:"$2",get children(){return[t(u,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return r("global.cancel")}}),t(u,{get loading(){return e.loading},onClick:()=>e.onSubmit?.(n()),get children(){return r("global.ok")}})]}})]}})]}})]}})}),e("a",e=>{const{isOpen:r,onOpen:C,onClose:w}=n(),b=l();return[t(g,{w:"$full",spacing:"$2",get children(){return[t(o,{get id(){return e.id},get value(){return e.value},onInput:r=>e.onChange(r.currentTarget.value),get readOnly(){return e.onlyFolder},get onClick(){return e.onlyFolder?C:()=>{}},get placeholder(){return b("global."+(e.onlyFolder?"choose_folder":"choose_or_input_path"))}}),t(a,{get when(){return!e.onlyFolder},get children(){return t(u,{onClick:C,get children(){return b("global.choose")}})}})]}}),t(f,{size:"xl",get opened(){return r()},onClose:w,get children(){return[t(c,{}),t(i,{get children(){return[t(d,{}),t(h,{get children(){return b("global.choose_folder")}}),t(s,{get children(){return t(L,{forceRoot:!0,get onChange(){return e.onChange}})}}),t(p,{get children(){return t(u,{onClick:w,get children(){return b("global.confirm")}})}})]}})]}})]})}}});

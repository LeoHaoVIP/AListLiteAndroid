System.register(["./index-legacy-B4yRbF0f.js"],function(e,r){"use strict";var t,n,a,u,s,c,i,o,g,l,d,h,f,y,b,p,v,x,m,w,_;return{setters:[e=>{t=e.j,n=e.b9,a=e.bq,u=e.B,s=e.D,c=e.S,i=e.af,o=e.c0,g=e.o,l=e.aK,d=e.ae,h=e.ad,f=e.aE,y=e.I,b=e.K,p=e.am,v=e.ay,x=e.r,m=e.bt,w=e.bb,_=e.d9}],execute:function(){e("default",()=>{const{back:e}=t(),[r,$]=n(()=>a.post("/auth/2fa/generate")),k=g(),[q,I]=u(),[K,S]=u("");(async()=>{if(v().otp)return x.warning(k("users.2fa_already_enabled")),void e();const r=await $();m(r,I)})();const[j,D]=n(()=>a.post("/auth/2fa/verify",{code:K(),secret:q()?.secret})),E=async()=>{const r=await D();w(r,()=>{_({...v(),otp:!0}),e()})};return s(p,{get loading(){return r()},get children(){return s(c,{get when(){return q()},get children(){return s(i,{spacing:"$2",alignItems:"start",get children(){return[s(o,{get children(){return k("users.scan_qr")}}),s(l,{boxSize:"$xs",rounded:"$lg",get src(){return q()?.qr}}),s(o,{get children(){return[d(()=>k("users.or_manual")),":"," ",s(h,{get color(){return f()},get children(){return q()?.secret}})]}}),s(y,{maxW:"$xs",get placeholder(){return k("users.input_code")},get value(){return K()},onInput:e=>S(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&E()}}),s(b,{get loading(){return j()},onClick:E,get children(){return k("users.verify")}})]}})}})}})})}}});
